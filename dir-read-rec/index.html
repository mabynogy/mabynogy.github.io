<!doctype html><html><head><meta charset="utf-8"><title>dir-read-rec</title></head><body><script src="/spa-mabynogy.js"></script><pre>function dir_read_rec(x,y)
{
 check(is_str,x)
 
 if(is_undef(y))
  return dir_read_rec(x,is_file)
  
 check(is_fn,y)
 
 const r=arr()
 const dir=path_real(x)
 const recursive=true
 const option={recursive}
 
 for(const v of fs.readdirSync(dir,option))
 {
  const path=path_concat(dir,v)
  const b=y(path)
  
  if(is_true(b))
   push(r,path)
  else
   check(is_false,b)  
 }
 
 return r
}</pre></body></html>