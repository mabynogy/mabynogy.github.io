<!doctype html><html><head><meta charset="utf-8"><title>flatten</title></head><body><script src="/spa-mabynogy.js"></script><pre>fn flatten x
 check is_container x
 
 let r obj
 let o clone x
 
 forin o
  let v get o k
  let key to_str k
  
  if is_container v
   let o flatten v
   
   forin o
    let v get o k
    let key concat key "." k
    
    put r key v
   end
  else
   put r key v
  end  
 end
 
 ret r
end</pre></body></html>